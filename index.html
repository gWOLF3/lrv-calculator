<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    <link
      href="https://fonts.googleapis.com/css?family=Roboto"
      rel="stylesheet"
    />
    <title>LRVCalculator.com</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
 html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
}
      body {
        font-family: "Roboto", sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
        font-size: 16px;
        letter-spacing: -0.5px;
      }

      .container {
        flex: 1;
        max-width: 90%;
        margin: 20px 10%;
        padding: 1.25em;
        border-radius: 10px;
        text-align: center;
      }

      .color-display,
      .sample-container {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
      }

      .color-swatch {
        width: 40px;
        height: 40px;
        border: 1px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        margin-right: 10px;
      }

      input[type="color"] {
        display: none;
      }

      .color-hex {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 10px;
        margin-right: 10px;
        text-align: center;
      }

      #sampleText {
        flex-grow: 1;
        padding: 10px;
        margin-right: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      .sample-display {
        flex-grow: 1;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        text-align: center;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }

      .dropdown-container {
        background-color: #e7f3fe;
        border-left: 6px solid #2196f3;
        margin-top: 20px;
        padding: 10px;
        font-size: 14px;
        cursor: pointer;
      }

      .dropdown-content {
        display: none;
        padding: 10px;
        text-align: left;
      }
/*
      .sponsor-container {
        max-width: 400px;
        margin: 20px auto;
        padding: 20px;
        background-color: #333333;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
      }
*/
.sponsor-container {
  display: flex;
    width: 100%;
    background-color: #333333;
    padding: 20px 0;
    text-align: center;
    justify-content: center;
    align-content: center;
    border-radius: 0;
    position: relative;
    bottom: 0;
}
.sponsor-text {
  font-size: 16px;
  color: white;
  margin-right: 15px;
}

.sponsor-logo {
  width: 150px;
  height: auto;
  filter: drop-shadow(5px 5px 5px #222);
}

#result {
  margin-top: 20px;
  margin-bottom: 20px;
  font-size: 18px;
  color: #333;
  font-weight: 700;
}

.color-lrv {
  display: inline-block;
  width: 90px; /* Match width of swatch and hex code boxes */
  height: 40px; /* Match height of swatch and hex code boxes */
  line-height: 40px; /* Center text vertically */
  text-align: center; /* Center text horizontally */
  padding: 0; /* Adjust padding if necessary */
  margin-left: 0px; /* Space between hex code box and LRV box */
  border: 1px solid #ddd;
  border-radius: 5px;
  background-color: #f4f4f4;
  font-size: 14px;
  font-family: "Roboto", sans-serif;
}
#contrastResultContainer {
  display: flex;
  align-items: left;
  justify-content: center;
  margin-bottom: 15px;
}

#contrastProgressBar {
  width: 30%; /* Adjust as needed */
  margin-left: 10px;
  background-color: #ddd;
  border-radius: 5px;
  position: relative;
}

#progressBarFill {
  height: 20px;
  width: 0%;
  background-color: rgba(0, 128, 0, 0.7);
  border-radius: 5px;
  transition: width 0.5s ease;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  margin-right: 5px;
  color: black; /* Text color inside the bar */
}
#resultLabel {
  font-weight: 550;
}
.download-button {
  background-color: #333; /* Dark grey background */
  color: white; /* White text */
  margin-top: 15px;
  padding: 10px 20px; /* Top & Bottom, Left & Right padding */
  border: solid; /* No border */
  border-color: gainsboro;
  border-radius: 5px; /* Rounded corners */
  font-size: 12px; /* Font size */
  cursor: pointer; /* Hand cursor on hover */
  transition: background-color 0.3s; /* Smooth background transition */
  position: fixed; /* Fixed position relative to the viewport */
  top: 2%; /* Distance from the top of the viewport */
  right: 5%; /* Distance from the right of the viewport */
  z-index: 1000; /* Ensure it stays on top of other elements */
}


.download-button:hover {
    background-color: #555; /* Slightly lighter grey on hover */
}
    </style>
  </head>
  <body>
    <div class="container">
      <h2>
        <span style="color: red">L</span><span style="color: green">R</span
        ><span style="color: blue">V</span>Calculator.com
      </h2>
      <div class="color-display">
        <input
          type="color"
          id="colorPicker1"
          value="#FFFFFF"
          onchange="updateColor('colorPicker1', 'swatch1', 'color1')"
        />
        <div
          class="color-swatch"
          id="swatch1"
          style="background-color: #ffffff"
          onclick="colorPicker1.click()"
        ></div>
        <input type="text" id="color1" class="color-hex" value="#FFFFFF" />
        <span class="color-lrv" id="lrv1"></span>
      </div>
      <div class="color-display">
        <input
          type="color"
          id="colorPicker2"
          value="#000000"
          onchange="updateColor('colorPicker2', 'swatch2', 'color2')"
        />
        <div
          class="color-swatch"
          id="swatch2"
          style="background-color: #000000"
          onclick="colorPicker2.click()"
        ></div>
        <input type="text" id="color2" class="color-hex" value="#000000" />
        <span class="color-lrv" id="lrv2"></span>
      </div>

      <div
        id="contrastResultContainer"
        style="display: flex; align-items: center; justify-content: center"
      >
        <span id="resultLabel">LRV Contrast:</span>
        <div id="contrastProgressBar">
          <div id="progressBarFill">
            <span id="result"></span>
          </div>
        </div>
      </div>

      <div class="sample-container">
        <input
          type="text"
          id="sampleText"
          placeholder="Enter sample text"
          onchange="updateSampleDisplay()"
        />
        <div class="sample-display" id="sampleDisplay">Sample Text</div>
      </div>
      <div
        class="dropdown-container"
        onclick="toggleDropdown('whatIsLRVContent')"
      >
        What is LRV?
      </div>
      <div class="dropdown-content" id="whatIsLRVContent">
        <p>
          Light Reflectance Value (LRV) measures the percentage of light a color
          reflects. It's important in design for accessibility, as it helps
          determine the contrast between different surfaces, aiding visibility
          for people with visual impairments. High contrast is essential for
          readability and ease of navigation in various environments.
        </p>
        <p>A LRV Contrast Value above 70% is typically recommended. </p>
      </div>
      <div
        class="dropdown-container"
        onclick="toggleDropdown('howIsLRVCalculatedContent')"
      >
        How is LRV Calculated?
      </div>
      <div class="dropdown-content" id="howIsLRVCalculatedContent">
        <p>
          The LRV for a color is calculated using a formula that factors in the
          red, green, and blue (RGB) values of the color, adjusted for human
          vision. It's a measure of the percentage of visible light reflected
          from a surface.
        </p>
      </div>
      <button onclick="downloadPDF()" class="download-button">Export as PDF â†—</button>    </div>
    </div>
    <div class="sponsor-container">
      <p class="sponsor-text">Powered by:</p>
      <a href="https://asisignage.com" target="_blank">
          <img src="logo.png" alt="Sponsor Logo" class="sponsor-logo" />
      </a>
  </div>
  
  </body>
    <script>
      function toggleDropdown(contentId) {
        var content = document.getElementById(contentId);
        content.style.display =
          content.style.display === "block" ? "none" : "block";
      }
      function updateColor(pickerId, swatchId, hexId) {
        var color = document.getElementById(pickerId).value;
        document.getElementById(swatchId).style.backgroundColor = color;
        document.getElementById(hexId).value = color;
        calculateContrast();

        // Update LRV display
        var lrvValue = calculateLRV(color);
        var lrvDisplayId = hexId === "color1" ? "lrv1" : "lrv2";
        document.getElementById(lrvDisplayId).innerText =
          " LRV: " + lrvValue + "%";
      }
      function calculateContrast() {
        var color1 = document.getElementById("color1").value;
        var color2 = document.getElementById("color2").value;
        var lrv1 = calculateLRV(color1);
        var lrv2 = calculateLRV(color2);
        var contrast = Math.abs(lrv1 - lrv2);
        var roundedContrast = Math.round(contrast);

        // Update the progress bar
        var progressBarFill = document.getElementById("progressBarFill");
        progressBarFill.style.width = roundedContrast + "%";

        // Optional: Change color based on contrast value
        if (roundedContrast <= 30) {
          progressBarFill.style.backgroundColor = "rgba(217,30,24,.7)"; // Low Contrast
        } else if (roundedContrast <= 70) {
          progressBarFill.style.backgroundColor = "rgba(255,165,0,.7)"; // Medium Contrast
        } else {
          progressBarFill.style.backgroundColor = "rgba(0,128,0,.7)"; // High Contrast
        }

        document.getElementById("result").textContent = roundedContrast + "%";
      }
      function calculateLRV(hexColor) {
        var r = parseInt(hexColor.substring(1, 3), 16) / 255;
        var g = parseInt(hexColor.substring(3, 5), 16) / 255;
        var b = parseInt(hexColor.substring(5, 7), 16) / 255;
        var lrv = 0.2126 * r + 0.7152 * g + 0.0722 * b;
        return Math.round(lrv * 100); // Return rounded value
      }
      function updateSampleDisplay() {
        var sampleText =
          document.getElementById("sampleText").value || "Sample Text";
        var color1 = document.getElementById("color1").value;
        var color2 = document.getElementById("color2").value;
        var sampleDisplay = document.getElementById("sampleDisplay");
        sampleDisplay.textContent = sampleText;
        sampleDisplay.style.color = color1;
        sampleDisplay.style.backgroundColor = color2;
        calculateContrast();
      }

      document
        .getElementById("colorPicker1")
        .addEventListener("input", function () {
          updateColor("colorPicker1", "swatch1", "color1");
          updateSampleDisplay();
        });
      document
        .getElementById("colorPicker2")
        .addEventListener("input", function () {
          updateColor("colorPicker2", "swatch2", "color2");
          updateSampleDisplay();
        });

      document.getElementById("color1").addEventListener("input", function () {
        var color = this.value;
        // Check if the input is a valid hex color
        if (/^#[0-9A-F]{6}$/i.test(color)) {
          document.getElementById("swatch1").style.backgroundColor = color;
          document.getElementById("colorPicker1").value = color;
          calculateContrast();
          updateSampleDisplay();
        }
      });

      document.getElementById("color2").addEventListener("input", function () {
        var color = this.value;
        // Check if the input is a valid hex color
        if (/^#[0-9A-F]{6}$/i.test(color)) {
          document.getElementById("swatch2").style.backgroundColor = color;
          document.getElementById("colorPicker2").value = color;
          calculateContrast();
          updateSampleDisplay();
        }
      });

      function initColor(pickerId, swatchId, hexId) {
        var colorPicker = document.getElementById(pickerId);
        var colorSwatch = document.getElementById(swatchId);
        var colorHex = document.getElementById(hexId);

        var storedColor = colorHex.value; // Retrieve the stored color from the hex input
        colorPicker.value = storedColor; // Set the color picker value
        colorSwatch.style.backgroundColor = storedColor; // Set the swatch background color

        // Calculate and display LRV
        var lrvValue = calculateLRV(storedColor);
        var lrvDisplayId = hexId === "color1" ? "lrv1" : "lrv2";
        document.getElementById(lrvDisplayId).innerText =
          " LRV: " + lrvValue + "%";
      }

     function downloadPDF() {
    // Get the button element
    var downloadButton = document.querySelector('.download-button');

    // Temporarily hide the button
    downloadButton.style.display = 'none';

    // Set up options for html2pdf
    var opt = {
        margin:       10,
        filename:     'lrvcalculator.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    // Generate PDF
    html2pdf().from(document.body).set(opt).save().then(function() {
        // Show the button again after PDF is generated
        downloadButton.style.display = 'block';
    });
} 
initColor("colorPicker1", "swatch1", "color1");
initColor("colorPicker2", "swatch2", "color2");
calculateContrast();
</script>
</html>
